{"ast":null,"code":"var _dec,\n    _class,\n    _jsxFileName = \"/home/javier/work/urbe/Feldspar-master/src/Components/SaveLoadModal/LoadFile/LoadModal.jsx\";\n\nimport \"../../../App.css\";\nimport React, { Component } from \"react\";\nimport { inject, observer } from \"mobx-react\";\nimport { BASE_URL, FLOOR_MODELS, REMOVE_MODEL, RETRIEVE_MODEL } from \"../../../Constants.js\";\nimport Modal from \"react-bootstrap/Modal\";\nimport ModalHeading from \"../../ModalHeading.jsx\";\nimport SaveFileList from \"../SaveFileList.jsx\";\nimport Button from \"react-bootstrap/Button\";\nimport axios from \"axios\";\nimport LargeAlert from \"../../LargeAlert.jsx\";\nimport $ from \"jquery\";\nlet LoadModal = (_dec = inject(\"store\"), _dec(_class = observer(_class = class LoadModal extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDisabled: false,\n      isError: false,\n      fileName: \"\",\n      fileUri: \"\",\n      saveFileList: [],\n      showModal: false,\n      copied: false\n    };\n    this.handleClose = this.handleClose.bind(this);\n    this.updateSaveFileList = this.updateSaveFileList.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleRemove = this.handleRemove.bind(this);\n    this.handleShare = this.handleShare.bind(this);\n  }\n\n  handleButtonClick() {\n    if (this.state.fileUri !== null && this.state.fileUri !== \"\") {\n      this.props.clickFunc(this.state.fileUri);\n      this.handleClose();\n    }\n  }\n\n  handleClose() {\n    this.props.store.setLoadFileModal(false);\n    this.setState({\n      fileName: \"\",\n      fileUri: \"\",\n      showModal: false,\n      isError: false\n    });\n  }\n\n  handleShare() {\n    this.setState({\n      copied: true,\n      isError: false\n    });\n  }\n\n  async handleRemove(id) {\n    let token = this.props.store.getAccessToken;\n    let config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    let body = {\n      _id: id\n    };\n\n    try {\n      await axios.post(BASE_URL + FLOOR_MODELS + REMOVE_MODEL, body, config);\n      this.updateSaveFileList();\n    } catch (e) {\n      console.log(e);\n      this.setState({\n        isError: true\n      });\n    }\n  }\n\n  handleClick(name, uri, event) {\n    // console.log(uri);\n    this.setState({\n      fileName: name,\n      fileUri: uri,\n      isError: false\n    });\n    $(\".save-file-list-item\").css(\"border-color\", \"#ffffff\");\n    event.currentTarget.style.borderColor = \"#5a6268\";\n  }\n\n  async updateSaveFileList() {\n    let token = this.props.store.getAccessToken;\n    let config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n\n    try {\n      let res = await axios.post(BASE_URL + FLOOR_MODELS + RETRIEVE_MODEL, {}, config);\n      this.setState({\n        saveFileList: res.data,\n        isError: false\n      });\n    } catch (e) {\n      console.log(e);\n      this.setState({\n        isError: true\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapShot) {\n    if (this.props.store.showLoadFileModal && !prevState.showModal) {\n      this.setState({\n        showModal: true,\n        isError: false\n      });\n      this.updateSaveFileList();\n    }\n  }\n\n  render() {\n    const {\n      store\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Modal, {\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      show: store.showLoadFileModal,\n      onHide: () => this.handleClose(),\n      id: \"loadModal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeading, {\n      icon: \"loadFile\",\n      message: \"Load Project\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form-space\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(SaveFileList, {\n      clickFunc: this.handleClick,\n      removeFunc: this.handleRemove,\n      shareFunc: this.handleShare,\n      fileList: this.state.saveFileList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"danger\",\n      className: \"login-submit-button\",\n      disabled: this.state.isDisabled,\n      onClick: this.handleButtonClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, \"Load\"), this.state.copied && /*#__PURE__*/React.createElement(LargeAlert, {\n      variant: \"success\",\n      message: \"Link Copied to Clipboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }), this.state.isError && /*#__PURE__*/React.createElement(LargeAlert, {\n      variant: \"danger\",\n      message: \"Some Error Occurred\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }))));\n  }\n\n}) || _class) || _class);\nexport default LoadModal;","map":{"version":3,"sources":["/home/javier/work/urbe/Feldspar-master/src/Components/SaveLoadModal/LoadFile/LoadModal.jsx"],"names":["React","Component","inject","observer","BASE_URL","FLOOR_MODELS","REMOVE_MODEL","RETRIEVE_MODEL","Modal","ModalHeading","SaveFileList","Button","axios","LargeAlert","$","LoadModal","constructor","props","state","isDisabled","isError","fileName","fileUri","saveFileList","showModal","copied","handleClose","bind","updateSaveFileList","handleClick","handleButtonClick","handleRemove","handleShare","clickFunc","store","setLoadFileModal","setState","id","token","getAccessToken","config","headers","Authorization","body","_id","post","e","console","log","name","uri","event","css","currentTarget","style","borderColor","res","data","componentDidUpdate","prevProps","prevState","snapShot","showLoadFileModal","render"],"mappings":"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","sourcesContent":["import \"../../../App.css\";\nimport React, { Component } from \"react\";\nimport { inject, observer } from \"mobx-react\";\nimport {\n  BASE_URL,\n  FLOOR_MODELS,\n  REMOVE_MODEL,\n  RETRIEVE_MODEL,\n} from \"../../../Constants.js\";\nimport Modal from \"react-bootstrap/Modal\";\nimport ModalHeading from \"../../ModalHeading.jsx\";\nimport SaveFileList from \"../SaveFileList.jsx\";\nimport Button from \"react-bootstrap/Button\";\nimport axios from \"axios\";\nimport LargeAlert from \"../../LargeAlert.jsx\";\nimport $ from \"jquery\";\n\n@inject(\"store\")\n@observer\nclass LoadModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isDisabled: false,\n      isError: false,\n      fileName: \"\",\n      fileUri: \"\",\n      saveFileList: [],\n      showModal: false,\n      copied: false,\n    };\n\n    this.handleClose = this.handleClose.bind(this);\n    this.updateSaveFileList = this.updateSaveFileList.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleRemove = this.handleRemove.bind(this);\n    this.handleShare = this.handleShare.bind(this);\n  }\n\n  handleButtonClick() {\n    if (this.state.fileUri !== null && this.state.fileUri !== \"\") {\n      this.props.clickFunc(this.state.fileUri);\n      this.handleClose();\n    }\n  }\n\n  handleClose() {\n    this.props.store.setLoadFileModal(false);\n    this.setState({\n      fileName: \"\",\n      fileUri: \"\",\n      showModal: false,\n      isError: false,\n    });\n  }\n\n  handleShare() {\n    this.setState({ copied: true, isError: false });\n  }\n\n  async handleRemove(id) {\n    let token = this.props.store.getAccessToken;\n    let config = {\n      headers: { Authorization: `Bearer ${token}` },\n    };\n    let body = { _id: id };\n    try {\n      await axios.post(BASE_URL + FLOOR_MODELS + REMOVE_MODEL, body, config);\n      this.updateSaveFileList();\n    } catch (e) {\n      console.log(e);\n      this.setState({ isError: true });\n    }\n  }\n\n  handleClick(name, uri, event) {\n    // console.log(uri);\n    this.setState({ fileName: name, fileUri: uri, isError: false });\n    $(\".save-file-list-item\").css(\"border-color\", \"#ffffff\");\n    event.currentTarget.style.borderColor = \"#5a6268\";\n  }\n\n  async updateSaveFileList() {\n    let token = this.props.store.getAccessToken;\n    let config = {\n      headers: { Authorization: `Bearer ${token}` },\n    };\n    try {\n      let res = await axios.post(\n        BASE_URL + FLOOR_MODELS + RETRIEVE_MODEL,\n        {},\n        config\n      );\n      this.setState({ saveFileList: res.data, isError: false });\n    } catch (e) {\n      console.log(e);\n      this.setState({ isError: true });\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapShot) {\n    if (this.props.store.showLoadFileModal && !prevState.showModal) {\n      this.setState({ showModal: true, isError: false });\n      this.updateSaveFileList();\n    }\n  }\n\n  render() {\n    const { store } = this.props;\n    return (\n      <Modal\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n        show={store.showLoadFileModal}\n        onHide={() => this.handleClose()}\n        id=\"loadModal\"\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>\n            <ModalHeading icon=\"loadFile\" message=\"Load Project\" />\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"login-form-space\">\n            <SaveFileList\n              clickFunc={this.handleClick}\n              removeFunc={this.handleRemove}\n              shareFunc={this.handleShare}\n              fileList={this.state.saveFileList}\n            />\n\n            <Button\n              variant=\"danger\"\n              className=\"login-submit-button\"\n              disabled={this.state.isDisabled}\n              onClick={this.handleButtonClick}\n            >\n              Load\n            </Button>\n\n            {this.state.copied && (\n              <LargeAlert\n                variant=\"success\"\n                message=\"Link Copied to Clipboard\"\n              />\n            )}\n            {this.state.isError && (\n              <LargeAlert variant=\"danger\" message=\"Some Error Occurred\" />\n            )}\n          </div>\n        </Modal.Body>\n      </Modal>\n    );\n  }\n}\n\nexport default LoadModal;\n"]},"metadata":{},"sourceType":"module"}